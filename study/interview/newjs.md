# JS复习指南

## 执行上下文

执行上下文指的是当前运行环境下的一个可访问的变量环境

目前在js中存在的执行上下文包括

- 全局执行上下文
- 函数执行上下文
- eval执行上下文

### 执行栈

由于在js中函数是可访问到父级作用域中的变量， 所以他们的执行上下文是存在向上访问的关系，而形成这种关系的方式用的就是`执行栈（先进后出）`的结构

当一个函数被触发的时候，在编译阶段会生成自己的一个执行上下文，里面包含了当前这个函数自身存在的变量

由于js中存在两种定义变量的方式，并且具有不同的行为，所以环境被区分为`词法环境`和`语法环境`

语法环境存在的变量是用var定义的，那么词法环境就是用const跟let定义的变量

并且在es6之后明确规定， const跟let是有块级作用域的，所以在词法环境中，如果存在块的话，那么他们的变量也是不能被外部访问的，那么词法环境就应该是一个小型的栈，可以从下向上的寻找

### 闭包

一个函数会产生闭包的原因是，当前这个函数中返回了另一个函数，然后在另一个函数中的变量存在引用上一个函数的变量，那么就会形成闭包

闭包的变量存放的位置其实是跟当前函数被定义的时候是相同的，就是在函数被编译的时候，他应该还存在一个特殊的变量环境，就是闭包环境， 那么这个环境是跟随着函数存放的位置一起绑定的， 当执行上下文被推出的时候，闭包环境不会被释放，而当前函数的执行上下文会被释放，直到存在闭包的函数的变量被释放的时候，这个闭包才会被释放

而闭包的存在他依旧是一个栈，因为内部的变量可能是